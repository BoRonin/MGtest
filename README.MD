# Сервис сохранения профилей и изменения профилей

Сервис использует MongoDB в качестве DB и Redis в качестве кэша. Запускается через docker compose up или make up.
При обновлении профиля будет возвращаться количество измененных полей.


В нашем случае профиль состоит из имени и массива bags из объектов, в каждом из которых есть массив facts.
Подразумевается, что количество полей в профилях одинаковое. 

## /data
### POST

Отправляем json в следующем виде для сохранения профиля

```bash
{
{
    "name": "Name",
    "bags": [
        {
            "facts": [
                {
                    "info": "yomama",
                    "number": 1
                },
                {
                    "info": "yomama2",
                    "number": 2
                }
            ]
        },
          {
            "facts": [
                {
                    "info": "yomama3",
                    "number": 3
                },
                {
                    "info": "yomama4",
                    "number": 4
                }
            ]
        }
    ]
}
}
```

Сервис складывает ее в MongoBD и кешарует в Redis на некоторое время, чтобы не делать повторных запросов в базу.


### PUT

Запрос с телом в следующем виде

```bash
{
    "id": "(тут id существующего профиля)",
    "name": "SomeData, yo.",
    "bags": [
        {
            "facts": [
                {
                    "info": "yomamanew!",
                    "number": 1
                },
                {
                    "info": "yomama2new!",
                    "number": 2
                }
            ]
        },
        {
            "facts": [
                {
                    "info": "yomama!new",
                    "number": 3
                },
                {
                    "info": "yomama2!new",
                    "number": 4
                }
            ]
        }
    ]
}
```

Если сравнить с первым запросом в секции POST, изменится поле name и каждое поле info в каждом массиве facts. В ответе придет 5 (количество измененных полей)



### GET

Запрос с URL параметром id для просмотра профиля